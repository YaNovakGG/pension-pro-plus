<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8">
  <title>Pension PRO+ ‎– השוואת קרנות פנסיה</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;700&display=swap');
    :root{--border:#d7e0ea;--blue:#1e88e5;--bg:#f6f8fb}
    *{box-sizing:border-box}
    body{margin:0;font-family:'Rubik',sans-serif;background:var(--bg);direction:rtl;padding:24px}
    h1{margin-top:0;text-align:center}
    table{width:100%;border-collapse:collapse;margin-top:12px}
    th,td{border:1px solid var(--border);padding:10px;text-align:right}
    th{background:#eef4ff}
    button{background:var(--blue);color:#fff;border:none;border-radius:8px;padding:6px 10px;cursor:pointer}
    .badge{display:inline-block;background:#eaf2ff;border:1px solid #a5c4ff;border-radius:999px;padding:0 6px;font-size:11px;margin-right:4px}
    .info{font-size:12px;color:#607d8b}
  </style>
</head>
<body>
<h1>Pension PRO+ ‎– דמו Plug & Play</h1>

<!-- הנתונים חיים – נטענים מ-funds.json -->
<table id="tbl"><thead>
  <tr><th>#</th><th>קרן</th><th>מס׳ קרן</th><th>קטגוריה</th>
      <th>תשואה 5 שנים</th><th>Sharpe</th><th>מאזן אקטוארי</th>
      <th>הסבר</th></tr></thead><tbody></tbody></table>

<div id="foot" class="info">טוען נתונים…</div>

<script>
/* קריאה ל-funds.json – שנוצר אוטומטית ב-GitHub Action */
fetch('funds.json',{cache:'no-store'})
  .then(r=>r.json())
  .then(rows=>{
    const tbody=document.querySelector('#tbl tbody');
    rows.forEach((r,i)=>{
      const tr=document.createElement('tr');
      tr.innerHTML=`<td>${i+1}</td>
        <td>${r.manager} <span class="badge">${r.track_type}</span></td>
        <td>${r.fund_no}</td><td>${r.cat}</td>
        <td>${(r.ret5y*100).toFixed(1)}%</td>
        <td>${r.sharpe?.toFixed(2)??'—'}</td>
        <td>${(r.act*100).toFixed(2)}%</td>
        <td><button onclick="alert(r.explain)">הסבר</button></td>`;
      tbody.appendChild(tr);
    });
    document.getElementById('foot').textContent=
      'עודכן: '+new Date(rows[0].asof).toLocaleDateString('he-IL');
  })
  .catch(()=>{document.getElementById('foot').textContent='שגיאה בטעינת הנתונים';});
</script>
</body>
</html>
